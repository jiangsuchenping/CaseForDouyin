@echo off
:: 关闭命令回显，使输出更整洁

chcp 65001 >nul
:: 设置代码页为UTF-8，支持中文显示

:: =============================================================================
:: 鸡兔同笼问题求解程序
:: 问题描述：已知头的总数和脚的总数，求鸡和兔的数量
:: 数学原理：
::   设鸡为x只，兔为y只
::   x + y = 总头数
::   2x + 4y = 总脚数
::   解得：x = (4*总头数 - 总脚数) / 2
::         y = 总头数 - x
:: =============================================================================

echo 鸡兔同笼问题求解器
echo.  :: 输出空行，增加可读性

:: =============================================================================
:: 输入部分
:: =============================================================================
:: 获取用户输入的头的总数
set /p heads=请输入头的总数: 
:: 获取用户输入的脚的总数
set /p feet=请输入脚的总数: 

:: =============================================================================
:: 输入验证部分
:: =============================================================================
:: 验证头数是否为空
if "%heads%"=="" (
    echo 错误：头数不能为空！
    goto end  :: 跳转到程序结束
)

:: 验证脚数是否为空
if "%feet%"=="" (
    echo 错误：脚数不能为空！
    goto end  :: 跳转到程序结束
)

:: 验证头数是否为纯数字
:: 使用for /f命令，将非数字字符作为分隔符，如果存在非数字字符则执行错误处理
for /f "delims=0123456789" %%a in ("%heads%") do (
    echo 错误：头数必须是数字！
    goto end  :: 跳转到程序结束
)

:: 验证脚数是否为纯数字
for /f "delims=0123456789" %%a in ("%feet%") do (
    echo 错误：脚数必须是数字！
    goto end  :: 跳转到程序结束
)

:: =============================================================================
:: 计算部分
:: =============================================================================
:: 根据公式计算鸡的数量：(4*总头数 - 总脚数) / 2
set /a chickens=(4*%heads%-%feet%)/2
:: 计算兔的数量：总头数 - 鸡的数量
set /a rabbits=%heads%-%chickens%

:: =============================================================================
:: 结果验证部分
:: =============================================================================
:: 计算总脚数，验证结果是否正确
set /a total_feet=%chickens%*2+%rabbits%*4

:: 验证条件：
:: 1. 计算得到的总脚数与输入的总脚数相等
:: 2. 鸡的数量不能为负数
:: 3. 兔的数量不能为负数
if %total_feet% equ %feet% (if %chickens% geq 0 (if %rabbits% geq 0 (
    echo.  :: 输出空行，增加可读性
    echo 求解结果：
    echo ----------------------------
    echo 鸡的数量：%chickens%
    echo 兔的数量：%rabbits%
    echo ----------------------------
    echo 验证：
    echo 总头数：%heads%，总脚数：%total_feet%
    goto end  :: 跳转到程序结束
)))

:: =============================================================================
:: 错误处理部分
:: =============================================================================
echo.  :: 输出空行，增加可读性
echo 错误：无解！
echo 请检查输入是否符合实际情况。
:: 可能的无解原因：
:: 1. 脚数不是偶数
:: 2. 脚数少于2*头数（每只至少2只脚）
:: 3. 脚数多于4*头数（每只最多4只脚）
:: 4. 解得的鸡或兔数量为负数

:: =============================================================================
:: 程序结束
:: =============================================================================
:end
echo.  :: 输出空行，增加可读性
pause
:: 暂停程序，让用户查看结果